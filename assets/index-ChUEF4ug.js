(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const l of e)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function o(e){const l={};return e.integrity&&(l.integrity=e.integrity),e.referrerPolicy&&(l.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?l.credentials="include":e.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(e){if(e.ep)return;e.ep=!0;const l=o(e);fetch(e.href,l)}})();const I=""+new URL("photo_1-VKNFUsTZ.jpg",import.meta.url).href,C=""+new URL("photo_2-B7Tn505n.jpg",import.meta.url).href,T=""+new URL("photo_3-K2pGZrIL.jpg",import.meta.url).href,b=""+new URL("photo_final-Bu6DBl97.jpg",import.meta.url).href,c=3,v=Object.assign({"./assets/photo_1.jpg":I,"./assets/photo_2.jpg":C,"./assets/photo_3.jpg":T,"./assets/photo_final.jpg":b});let i=Object.keys(v).filter(t=>t.match(/photo_\d+\.jpg$/)).sort((t,s)=>{var e,l;const o=parseInt(((e=t.match(/photo_(\d+)\.jpg$/))==null?void 0:e[1])||0),n=parseInt(((l=s.match(/photo_(\d+)\.jpg$/))==null?void 0:l[1])||0);return o-n}).map(t=>v[t]);if(i.length===0){const t=Object.assign({});Object.keys(t).length>0?i=Object.values(t):i=["https://picsum.photos/450/450"]}let u=0;const r=document.getElementById("board"),g=document.getElementById("congrats-modal"),L=document.getElementById("modal-title"),E=document.getElementById("modal-message"),j=document.getElementById("close-modal-btn"),m=document.getElementById("continue-btn"),y=document.getElementById("controls-container"),h=document.getElementById("level-indicator");let f=[],d=null;function _(){h.textContent=`Container ${u+1}/${i.length}`,r.innerHTML="",r.classList.remove("solved"),g.classList.add("hidden"),y.classList.add("hidden"),f=[];const t=i[u];for(let n=0;n<c*c;n++){const e=document.createElement("div");e.classList.add("drop-zone"),e.dataset.index=n,e.addEventListener("dragover",M),e.addEventListener("drop",$),r.appendChild(e)}for(let n=0;n<c*c;n++){const e=document.createElement("div");e.classList.add("tile"),e.draggable=!0,e.id=`tile-${n}`,e.dataset.correctIndex=n;const l=Math.floor(n/c),a=n%c;e.style.backgroundImage=`url(${t})`,e.style.backgroundPosition=`${a*50}% ${l*50}%`,e.addEventListener("dragstart",O),e.addEventListener("dragend",D),e.addEventListener("touchstart",w,{passive:!1}),e.addEventListener("touchmove",B,{passive:!1}),e.addEventListener("touchend",S),e.addEventListener("touchcancel",k),f.push(e)}const s=[...f].sort(()=>Math.random()-.5),o=document.querySelectorAll(".drop-zone");s.forEach((n,e)=>{o[e].appendChild(n)})}let p=null;function O(t){p=this,this.classList.add("dragging"),t.dataTransfer.effectAllowed="move"}function D(t){this.classList.remove("dragging"),p=null}function M(t){t.preventDefault(),t.dataTransfer.dropEffect="move"}function $(t){t.preventDefault();const s=t.target.closest(".drop-zone");s&&p&&x(p,s)}function x(t,s){if(!t||!s)return;const o=s.querySelector(".tile"),n=t.parentNode;o&&n&&n.appendChild(o),s.appendChild(t),z()}function w(t){t.touches.length===1&&(d=t.currentTarget,d.classList.add("dragging"),t.preventDefault())}function B(t){d&&t.preventDefault()}function S(t){var e;if(!d)return;t.preventDefault();const s=t.changedTouches[0],o=document.elementFromPoint(s.clientX,s.clientY),n=(e=o==null?void 0:o.closest)==null?void 0:e.call(o,".drop-zone");d.classList.remove("dragging"),n&&x(d,n),d=null}function k(){d&&(d.classList.remove("dragging"),d=null)}function z(){const t=document.querySelectorAll(".drop-zone");let s=0;console.group("Check Win Status"),t.forEach(o=>{const n=o.querySelector(".tile");if(n){const e=parseInt(o.dataset.index),l=parseInt(n.dataset.correctIndex);e===l?s++:console.log(`Mismatch: Zone ${e} has Tile ${l}`)}else console.log(`Empty Zone: ${o.dataset.index}`)}),console.groupEnd(),console.log(`Correct tiles: ${s}/${c*c}`),s===c*c&&(console.log("Puzzle Solved! Triggering modal..."),setTimeout(()=>{A()},200))}document.addEventListener("keydown",t=>{t.altKey&&t.key==="d"&&(document.body.classList.toggle("debug-mode"),console.log("Debug mode toggled"))});function A(){if(console.log("showWinModal executing..."),!g){console.error("Modal element missing!");return}g.classList.remove("hidden"),r.classList.add("solved"),j.onclick=()=>{g.classList.add("hidden")},y.classList.remove("hidden"),u<i.length-1?(L.textContent="Access Granted",E.textContent=`Correct key hash entered. Container ${u+1}/${i.length} has been unlocked.`,m.textContent="Proceed to Next Container",m.onclick=()=>{u++,_()}):(L.textContent="Decryption Successful",E.textContent="All containers unlocked. Data retrieved.",m.textContent="Open Decrypted Container",m.onclick=()=>{P()})}function P(){g.classList.add("hidden"),y.classList.add("hidden"),r.innerHTML="",r.style.display="flex",r.style.justifyContent="center",r.style.alignItems="center",r.style.background="none",r.style.border="none",r.style.boxShadow="none";const t=Object.assign({"./assets/photo_final.jpg":b});let s="https://picsum.photos/450/450";Object.keys(t).length>0&&(s=Object.values(t)[0]);const o=document.createElement("img");o.src=s,o.style.maxWidth="100%",o.style.maxHeight="100%",o.style.borderRadius="8px",o.style.boxShadow="0 0 20px rgba(255, 215, 0, 0.5)",r.appendChild(o),h.textContent="Go get me, Maarten!",h.style.color="#FFD700",h.style.textShadow="0 0 10px rgba(255, 215, 0, 0.5)"}_();
