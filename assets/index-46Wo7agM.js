(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))l(e);new MutationObserver(e=>{for(const c of e)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&l(u)}).observe(document,{childList:!0,subtree:!0});function s(e){const c={};return e.integrity&&(c.integrity=e.integrity),e.referrerPolicy&&(c.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?c.credentials="include":e.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function l(e){if(e.ep)return;e.ep=!0;const c=s(e);fetch(e.href,c)}})();const T=""+new URL("photo_1-VKNFUsTZ.jpg",import.meta.url).href,j=""+new URL("photo_2-B7Tn505n.jpg",import.meta.url).href,w=""+new URL("photo_3-K2pGZrIL.jpg",import.meta.url).href,E=""+new URL("photo_final-Bu6DBl97.jpg",import.meta.url).href,r=3,x=Object.assign({"./assets/photo_1.jpg":T,"./assets/photo_2.jpg":j,"./assets/photo_3.jpg":w,"./assets/photo_final.jpg":E});let a=Object.keys(x).filter(t=>t.match(/photo_\d+\.jpg$/)).sort((t,o)=>{var e,c;const s=parseInt(((e=t.match(/photo_(\d+)\.jpg$/))==null?void 0:e[1])||0),l=parseInt(((c=o.match(/photo_(\d+)\.jpg$/))==null?void 0:c[1])||0);return s-l}).map(t=>x[t]);if(a.length===0){const t=Object.assign({});Object.keys(t).length>0?a=Object.values(t):a=["https://picsum.photos/450/450"]}let d=parseInt(localStorage.getItem("sinter_scramble_level")||"0");(d>=a.length||d<0)&&(d=0);const i=document.getElementById("board"),g=document.getElementById("congrats-modal"),_=document.getElementById("modal-title"),b=document.getElementById("modal-message"),O=document.getElementById("close-modal-btn"),h=document.getElementById("continue-btn"),L=document.getElementById("controls-container"),p=document.getElementById("level-indicator");let m=[],n=null,y=0,v=0;function I(){p.textContent=`Container ${d+1}/${a.length}`,i.innerHTML="",i.classList.remove("solved"),g.classList.add("hidden"),L.classList.add("hidden"),m=[];const t=a[d];for(let l=0;l<r*r;l++){const e=document.createElement("div");e.classList.add("drop-zone"),e.dataset.index=l,e.addEventListener("dragover",M),e.addEventListener("drop",S),i.appendChild(e)}for(let l=0;l<r*r;l++){const e=document.createElement("div");e.classList.add("tile"),e.draggable=!0,e.id=`tile-${l}`,e.dataset.correctIndex=l;const c=Math.floor(l/r),u=l%r;e.style.backgroundImage=`url(${t})`,e.style.backgroundPosition=`${u*50}% ${c*50}%`,e.addEventListener("dragstart",B),e.addEventListener("dragend",D),e.addEventListener("touchstart",$,{passive:!1}),e.addEventListener("touchmove",k,{passive:!1}),e.addEventListener("touchend",z),e.addEventListener("touchcancel",A),m.push(e)}const o=[...m].sort(()=>Math.random()-.5),s=document.querySelectorAll(".drop-zone");o.forEach((l,e)=>{s[e].appendChild(l)})}let f=null;function B(t){f=this,this.classList.add("dragging"),t.dataTransfer.effectAllowed="move"}function D(t){this.classList.remove("dragging"),f=null}function M(t){t.preventDefault(),t.dataTransfer.dropEffect="move"}function S(t){t.preventDefault();const o=t.target.closest(".drop-zone");o&&f&&C(f,o)}function C(t,o){if(!t||!o)return;const s=o.querySelector(".tile"),l=t.parentNode;s&&l&&l.appendChild(s),o.appendChild(t),P()}function $(t){if(t.touches.length!==1)return;n=t.currentTarget,n.classList.add("dragging");const o=t.touches[0],s=n.getBoundingClientRect();y=o.clientX-s.left,v=o.clientY-s.top,n.style.position="fixed",n.style.left=o.clientX-y+"px",n.style.top=o.clientY-v+"px",n.style.zIndex="1000",n.style.width=s.width+"px",n.style.height=s.height+"px",t.preventDefault()}function k(t){if(!n)return;t.preventDefault();const o=t.touches[0];n.style.left=o.clientX-y+"px",n.style.top=o.clientY-v+"px"}function z(t){var e;if(!n)return;t.preventDefault(),n.style.display="none";const o=t.changedTouches[0],s=document.elementFromPoint(o.clientX,o.clientY);n.style.display="";const l=(e=s==null?void 0:s.closest)==null?void 0:e.call(s,".drop-zone");n.classList.remove("dragging"),n.style.position="",n.style.left="",n.style.top="",n.style.zIndex="",n.style.width="",n.style.height="",l&&C(n,l),n=null}function A(){n&&(n.classList.remove("dragging"),n.style.position="",n.style.left="",n.style.top="",n.style.zIndex="",n.style.width="",n.style.height="",n=null)}function P(){const t=document.querySelectorAll(".drop-zone");let o=0;console.group("Check Win Status"),t.forEach(s=>{const l=s.querySelector(".tile");if(l){const e=parseInt(s.dataset.index),c=parseInt(l.dataset.correctIndex);e===c?o++:console.log(`Mismatch: Zone ${e} has Tile ${c}`)}else console.log(`Empty Zone: ${s.dataset.index}`)}),console.groupEnd(),console.log(`Correct tiles: ${o}/${r*r}`),o===r*r&&(console.log("Puzzle Solved! Triggering modal..."),setTimeout(()=>{R()},200))}document.addEventListener("keydown",t=>{t.altKey&&t.key==="d"&&(document.body.classList.toggle("debug-mode"),console.log("Debug mode toggled"))});function R(){if(console.log("showWinModal executing..."),!g){console.error("Modal element missing!");return}g.classList.remove("hidden"),i.classList.add("solved"),O.onclick=()=>{g.classList.add("hidden")},L.classList.remove("hidden"),d<a.length-1?(_.textContent="Access Granted",b.textContent=`Correct key hash entered. Container ${d+1}/${a.length} has been unlocked.`,h.textContent="Proceed to Next Container",h.onclick=()=>{d++,localStorage.setItem("sinter_scramble_level",d),I()}):(_.textContent="Decryption Successful",b.textContent="All containers unlocked. Data retrieved.",h.textContent="Open Decrypted Container",h.onclick=()=>{U()})}function U(){g.classList.add("hidden"),L.classList.add("hidden"),i.innerHTML="",i.style.display="flex",i.style.justifyContent="center",i.style.alignItems="center",i.style.background="none",i.style.border="none",i.style.boxShadow="none";const t=Object.assign({"./assets/photo_final.jpg":E});let o="https://picsum.photos/450/450";Object.keys(t).length>0&&(o=Object.values(t)[0]);const s=document.createElement("img");s.src=o,s.style.maxWidth="100%",s.style.maxHeight="100%",s.style.borderRadius="8px",s.style.boxShadow="0 0 20px rgba(255, 215, 0, 0.5)",i.appendChild(s),p.textContent="Go get me, Maarten!",p.style.color="#FFD700",p.style.textShadow="0 0 10px rgba(255, 215, 0, 0.5)"}I();
