(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const l of e)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function s(e){const l={};return e.integrity&&(l.integrity=e.integrity),e.referrerPolicy&&(l.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?l.credentials="include":e.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(e){if(e.ep)return;e.ep=!0;const l=s(e);fetch(e.href,l)}})();const x=""+new URL("photo_1-VKNFUsTZ.jpg",import.meta.url).href,I=""+new URL("photo_2-B7Tn505n.jpg",import.meta.url).href,C=""+new URL("photo_3-K2pGZrIL.jpg",import.meta.url).href,L=""+new URL("photo_final-Bu6DBl97.jpg",import.meta.url).href,d=3,y=150,b=Object.assign({"./assets/photo_1.jpg":x,"./assets/photo_2.jpg":I,"./assets/photo_3.jpg":C,"./assets/photo_final.jpg":L});let c=Object.keys(b).filter(t=>t.match(/photo_\d+\.jpg$/)).sort((t,n)=>{var e,l;const s=parseInt(((e=t.match(/photo_(\d+)\.jpg$/))==null?void 0:e[1])||0),o=parseInt(((l=n.match(/photo_(\d+)\.jpg$/))==null?void 0:l[1])||0);return s-o}).map(t=>b[t]);if(c.length===0){const t=Object.assign({});Object.keys(t).length>0?c=Object.values(t):c=["https://picsum.photos/450/450"]}let g=0;const r=document.getElementById("board"),u=document.getElementById("congrats-modal"),_=document.getElementById("modal-title"),v=document.getElementById("modal-message"),j=document.getElementById("close-modal-btn"),m=document.getElementById("continue-btn"),f=document.getElementById("controls-container"),p=document.getElementById("level-indicator");let h=[];function E(){p.textContent=`Container ${g+1}/${c.length}`,r.innerHTML="",r.classList.remove("solved"),u.classList.add("hidden"),f.classList.add("hidden"),h=[];const t=c[g];for(let o=0;o<d*d;o++){const e=document.createElement("div");e.classList.add("drop-zone"),e.dataset.index=o,e.addEventListener("dragover",w),e.addEventListener("drop",B),r.appendChild(e)}for(let o=0;o<d*d;o++){const e=document.createElement("div");e.classList.add("tile"),e.draggable=!0,e.id=`tile-${o}`,e.dataset.correctIndex=o;const l=Math.floor(o/d),a=o%d;e.style.backgroundImage=`url(${t})`,e.style.backgroundPosition=`-${a*y}px -${l*y}px`,e.addEventListener("dragstart",O),e.addEventListener("dragend",$),h.push(e)}const n=[...h].sort(()=>Math.random()-.5),s=document.querySelectorAll(".drop-zone");n.forEach((o,e)=>{s[e].appendChild(o)})}let i=null;function O(t){i=this,this.classList.add("dragging"),t.dataTransfer.effectAllowed="move"}function $(t){this.classList.remove("dragging"),i=null}function w(t){t.preventDefault(),t.dataTransfer.dropEffect="move"}function B(t){t.preventDefault();const n=t.target.closest(".drop-zone");if(n&&i){const s=n.querySelector(".tile");s&&i.parentNode.appendChild(s),n.appendChild(i),M()}}function M(){const t=document.querySelectorAll(".drop-zone");let n=0;console.group("Check Win Status"),t.forEach(s=>{const o=s.querySelector(".tile");if(o){const e=parseInt(s.dataset.index),l=parseInt(o.dataset.correctIndex);e===l?n++:console.log(`Mismatch: Zone ${e} has Tile ${l}`)}else console.log(`Empty Zone: ${s.dataset.index}`)}),console.groupEnd(),console.log(`Correct tiles: ${n}/${d*d}`),n===d*d&&(console.log("Puzzle Solved! Triggering modal..."),setTimeout(()=>{S()},200))}document.addEventListener("keydown",t=>{t.altKey&&t.key==="d"&&(document.body.classList.toggle("debug-mode"),console.log("Debug mode toggled"))});function S(){if(console.log("showWinModal executing..."),!u){console.error("Modal element missing!");return}u.classList.remove("hidden"),r.classList.add("solved"),j.onclick=()=>{u.classList.add("hidden")},f.classList.remove("hidden"),g<c.length-1?(_.textContent="Access Granted",v.textContent=`Correct key hash entered. Container ${g+1}/${c.length} has been unlocked.`,m.textContent="Proceed to Next Container",m.onclick=()=>{g++,E()}):(_.textContent="Decryption Successful",v.textContent="All containers unlocked. Data retrieved.",m.textContent="Open Decrypted Container",m.onclick=()=>{T()})}function T(){u.classList.add("hidden"),f.classList.add("hidden"),r.innerHTML="",r.style.display="flex",r.style.justifyContent="center",r.style.alignItems="center",r.style.background="none",r.style.border="none",r.style.boxShadow="none";const t=Object.assign({"./assets/photo_final.jpg":L});let n="https://picsum.photos/450/450";Object.keys(t).length>0&&(n=Object.values(t)[0]);const s=document.createElement("img");s.src=n,s.style.maxWidth="100%",s.style.maxHeight="100%",s.style.borderRadius="8px",s.style.boxShadow="0 0 20px rgba(255, 215, 0, 0.5)",r.appendChild(s),p.textContent="Go get me, Maarten!",p.style.color="#FFD700",p.style.textShadow="0 0 10px rgba(255, 215, 0, 0.5)"}E();
